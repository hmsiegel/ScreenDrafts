// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore.Migrations;

#nullable disable

namespace ScreenDrafts.Modules.Drafts.Infrastructure.Database.Migrations
{
    /// <inheritdoc />
    public partial class Initial_Drafts : Migration
    {
        /// <inheritdoc />
        protected override void Up(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.EnsureSchema(
                name: "drafts");

            migrationBuilder.CreateTable(
                name: "campaigns",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    slug = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: false),
                    name = table.Column<string>(type: "character varying(200)", maxLength: 200, nullable: false),
                    created_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    updated_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    is_deleted = table.Column<bool>(type: "boolean", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_campaigns", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "categories",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    name = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: false),
                    description = table.Column<string>(type: "character varying(500)", maxLength: 500, nullable: true),
                    created_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    modified_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    is_deleted = table.Column<bool>(type: "boolean", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_categories", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "drafter_teams",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: false),
                    number_of_drafters = table.Column<int>(type: "integer", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_drafter_teams", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "inbox_message_consumers",
                schema: "drafts",
                columns: table => new
                {
                    inbox_message_id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(500)", maxLength: 500, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_inbox_message_consumers", x => new { x.inbox_message_id, x.name });
                });

            migrationBuilder.CreateTable(
                name: "inbox_messages",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    type = table.Column<string>(type: "text", nullable: false),
                    content = table.Column<string>(type: "jsonb", maxLength: 2000, nullable: false),
                    occurred_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    processed_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    error = table.Column<string>(type: "text", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_inbox_messages", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "movies",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    movie_title = table.Column<string>(type: "text", nullable: false),
                    imdb_id = table.Column<string>(type: "text", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_movies", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "outbox_message_consumers",
                schema: "drafts",
                columns: table => new
                {
                    outbox_message_id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(500)", maxLength: 500, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_outbox_message_consumers", x => new { x.outbox_message_id, x.name });
                });

            migrationBuilder.CreateTable(
                name: "outbox_messages",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    type = table.Column<string>(type: "text", nullable: false),
                    content = table.Column<string>(type: "jsonb", maxLength: 2000, nullable: false),
                    occurred_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    processed_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    error = table.Column<string>(type: "text", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_outbox_messages", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "people",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    user_id = table.Column<Guid>(type: "uuid", nullable: true),
                    public_id = table.Column<string>(type: "text", nullable: false),
                    first_name = table.Column<string>(type: "text", nullable: false),
                    last_name = table.Column<string>(type: "text", nullable: false),
                    display_name = table.Column<string>(type: "text", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_people", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "series",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(200)", maxLength: 200, nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    kind = table.Column<int>(type: "integer", nullable: false),
                    canonical_policy = table.Column<int>(type: "integer", nullable: false),
                    continuity_scope = table.Column<int>(type: "integer", nullable: false),
                    continuity_date_rule = table.Column<int>(type: "integer", nullable: false),
                    default_draft_type = table.Column<int>(type: "integer", nullable: true),
                    created_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    updated_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    allowed_draft_types = table.Column<int>(type: "integer", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_series", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "movie_versions",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: false),
                    movie_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_movie_versions", x => x.id);
                    table.ForeignKey(
                        name: "fk_movie_versions_movies_movie_id",
                        column: x => x.movie_id,
                        principalSchema: "drafts",
                        principalTable: "movies",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "drafters",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    person_id = table.Column<Guid>(type: "uuid", nullable: false),
                    is_retired = table.Column<bool>(type: "boolean", nullable: false),
                    retired_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_drafters", x => x.id);
                    table.ForeignKey(
                        name: "fk_drafters_people_person_id",
                        column: x => x.person_id,
                        principalSchema: "drafts",
                        principalTable: "people",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "hosts",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    person_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_hosts", x => x.id);
                    table.ForeignKey(
                        name: "fk_hosts_people_person_id",
                        column: x => x.person_id,
                        principalSchema: "drafts",
                        principalTable: "people",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "drafts",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    public_id = table.Column<string>(type: "character varying(19)", maxLength: 19, nullable: false),
                    title = table.Column<string>(type: "character varying(255)", maxLength: 255, nullable: false),
                    description = table.Column<string>(type: "text", nullable: true),
                    created_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    updated_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    series_id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_type = table.Column<int>(type: "integer", nullable: false),
                    draft_status = table.Column<int>(type: "integer", nullable: false),
                    campaign_id = table.Column<Guid>(type: "uuid", nullable: true),
                    xmin = table.Column<uint>(type: "xid", rowVersion: true, nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_drafts", x => x.id);
                    table.ForeignKey(
                        name: "fk_drafts_campaigns_campaign_id",
                        column: x => x.campaign_id,
                        principalSchema: "drafts",
                        principalTable: "campaigns",
                        principalColumn: "id",
                        onDelete: ReferentialAction.SetNull);
                    table.ForeignKey(
                        name: "fk_drafts_series_series_id",
                        column: x => x.series_id,
                        principalSchema: "drafts",
                        principalTable: "series",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "drafter_team_drafter",
                schema: "drafts",
                columns: table => new
                {
                    drafter_id = table.Column<Guid>(type: "uuid", nullable: false),
                    drafter_team_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_drafter_team_drafter", x => new { x.drafter_id, x.drafter_team_id });
                    table.ForeignKey(
                        name: "fk_drafter_team_drafter_drafter_teams_drafter_team_id",
                        column: x => x.drafter_team_id,
                        principalSchema: "drafts",
                        principalTable: "drafter_teams",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "fk_drafter_team_drafter_drafters_drafter_id",
                        column: x => x.drafter_id,
                        principalSchema: "drafts",
                        principalTable: "drafters",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_categories",
                schema: "drafts",
                columns: table => new
                {
                    draft_id = table.Column<Guid>(type: "uuid", nullable: false),
                    category_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_categories", x => new { x.draft_id, x.category_id });
                    table.ForeignKey(
                        name: "fk_draft_categories_categories_category_id",
                        column: x => x.category_id,
                        principalSchema: "drafts",
                        principalTable: "categories",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "fk_draft_categories_drafts_draft_id",
                        column: x => x.draft_id,
                        principalSchema: "drafts",
                        principalTable: "drafts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_parts",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_id = table.Column<Guid>(type: "uuid", nullable: false),
                    part_index = table.Column<int>(type: "integer", nullable: false),
                    status = table.Column<int>(type: "integer", nullable: false),
                    scheduled_for_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    series_id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_type = table.Column<int>(type: "integer", nullable: false),
                    min_position = table.Column<int>(type: "integer", nullable: false),
                    max_position = table.Column<int>(type: "integer", nullable: false),
                    created_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    updated_at_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                    movie_version_policy_type = table.Column<int>(type: "integer", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_parts", x => x.id);
                    table.ForeignKey(
                        name: "fk_draft_parts_drafts_draft_id",
                        column: x => x.draft_id,
                        principalSchema: "drafts",
                        principalTable: "drafts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_hosts",
                schema: "drafts",
                columns: table => new
                {
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false),
                    host_id = table.Column<Guid>(type: "uuid", nullable: false),
                    role = table.Column<int>(type: "integer", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_hosts", x => new { x.draft_part_id, x.host_id });
                    table.ForeignKey(
                        name: "fk_draft_hosts_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "fk_draft_hosts_hosts_host_id",
                        column: x => x.host_id,
                        principalSchema: "drafts",
                        principalTable: "hosts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "draft_part_participants",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false),
                    participant_id_value = table.Column<Guid>(type: "uuid", nullable: false),
                    participant_kind_value = table.Column<int>(type: "integer", nullable: false),
                    starting_vetoes = table.Column<int>(type: "integer", nullable: false),
                    rollover_veto = table.Column<int>(type: "integer", nullable: false),
                    rollover_veto_override = table.Column<int>(type: "integer", nullable: false),
                    trivia_vetoes = table.Column<int>(type: "integer", nullable: false),
                    trivia_veto_overrides = table.Column<int>(type: "integer", nullable: false),
                    commissioner_overrides = table.Column<int>(type: "integer", nullable: false),
                    vetoes_used = table.Column<int>(type: "integer", nullable: false),
                    veto_overrides_used = table.Column<int>(type: "integer", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_part_participants", x => x.id);
                    table.ForeignKey(
                        name: "fk_draft_part_participants_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_part_required_movie_versions",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    movie_id = table.Column<Guid>(type: "uuid", nullable: false),
                    version_name = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: false),
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_part_required_movie_versions", x => x.id);
                    table.ForeignKey(
                        name: "fk_draft_part_required_movie_versions_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_releases",
                schema: "drafts",
                columns: table => new
                {
                    part_id = table.Column<Guid>(type: "uuid", nullable: false),
                    release_channel = table.Column<int>(type: "integer", nullable: false),
                    release_date = table.Column<DateOnly>(type: "date", nullable: false),
                    episode_number = table.Column<int>(type: "integer", nullable: true),
                    created_on_utc = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_releases", x => new { x.part_id, x.release_channel, x.release_date });
                    table.ForeignKey(
                        name: "fk_draft_releases_draft_parts_part_id",
                        column: x => x.part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "game_boards",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_game_boards", x => x.id);
                    table.ForeignKey(
                        name: "fk_game_boards_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "trivia_results",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false),
                    position = table.Column<int>(type: "integer", nullable: false),
                    questions_won = table.Column<int>(type: "integer", nullable: false),
                    participant_kind = table.Column<int>(type: "integer", nullable: false),
                    participant_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_trivia_results", x => x.id);
                    table.ForeignKey(
                        name: "fk_trivia_results_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "draft_positions",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    game_board_id = table.Column<Guid>(type: "uuid", nullable: false),
                    name = table.Column<string>(type: "character varying(50)", maxLength: 50, nullable: false),
                    picks = table.Column<string>(type: "text", nullable: false),
                    has_bonus_veto = table.Column<bool>(type: "boolean", nullable: false),
                    has_bonus_veto_override = table.Column<bool>(type: "boolean", nullable: false),
                    assigned_to_id = table.Column<Guid>(type: "uuid", nullable: true),
                    assigned_to_kind = table.Column<int>(type: "integer", nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_draft_positions", x => x.id);
                    table.ForeignKey(
                        name: "fk_draft_positions_game_boards_game_board_id",
                        column: x => x.game_board_id,
                        principalSchema: "drafts",
                        principalTable: "game_boards",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "commissioner_overrides",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    pick_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_commissioner_overrides", x => x.id);
                });

            migrationBuilder.CreateTable(
                name: "picks",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    position = table.Column<int>(type: "integer", nullable: false),
                    play_order = table.Column<int>(type: "integer", nullable: false),
                    movie_id = table.Column<Guid>(type: "uuid", nullable: false),
                    movie_version_name = table.Column<string>(type: "character varying(100)", maxLength: 100, nullable: true),
                    draft_part_id = table.Column<Guid>(type: "uuid", nullable: false),
                    played_by_participant_id = table.Column<Guid>(type: "uuid", nullable: false),
                    commissioner_override_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_picks", x => x.id);
                    table.ForeignKey(
                        name: "fk_picks_commissioner_overrides_commissioner_override_id",
                        column: x => x.commissioner_override_id,
                        principalSchema: "drafts",
                        principalTable: "commissioner_overrides",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "fk_picks_draft_part_participants_played_by_participant_id",
                        column: x => x.played_by_participant_id,
                        principalSchema: "drafts",
                        principalTable: "draft_part_participants",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "fk_picks_draft_parts_draft_part_id",
                        column: x => x.draft_part_id,
                        principalSchema: "drafts",
                        principalTable: "draft_parts",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                    table.ForeignKey(
                        name: "fk_picks_movies_movie_id",
                        column: x => x.movie_id,
                        principalSchema: "drafts",
                        principalTable: "movies",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                });

            migrationBuilder.CreateTable(
                name: "vetoes",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    target_pick_id = table.Column<Guid>(type: "uuid", nullable: false),
                    issued_by_participant_id = table.Column<Guid>(type: "uuid", nullable: false),
                    is_overridden = table.Column<bool>(type: "boolean", nullable: false),
                    occurred_on = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                    note = table.Column<string>(type: "character varying(1000)", maxLength: 1000, nullable: true)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_vetoes", x => x.id);
                    table.ForeignKey(
                        name: "fk_vetoes_draft_part_participants_issued_by_participant_id",
                        column: x => x.issued_by_participant_id,
                        principalSchema: "drafts",
                        principalTable: "draft_part_participants",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "fk_vetoes_picks_target_pick_id",
                        column: x => x.target_pick_id,
                        principalSchema: "drafts",
                        principalTable: "picks",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateTable(
                name: "veto_overrides",
                schema: "drafts",
                columns: table => new
                {
                    id = table.Column<Guid>(type: "uuid", nullable: false),
                    veto_id = table.Column<Guid>(type: "uuid", nullable: false),
                    issued_by_participant_id = table.Column<Guid>(type: "uuid", nullable: false)
                },
                constraints: table =>
                {
                    table.PrimaryKey("pk_veto_overrides", x => x.id);
                    table.ForeignKey(
                        name: "fk_veto_overrides_draft_part_participants_issued_by_participan",
                        column: x => x.issued_by_participant_id,
                        principalSchema: "drafts",
                        principalTable: "draft_part_participants",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Restrict);
                    table.ForeignKey(
                        name: "fk_veto_overrides_vetoes_veto_id",
                        column: x => x.veto_id,
                        principalSchema: "drafts",
                        principalTable: "vetoes",
                        principalColumn: "id",
                        onDelete: ReferentialAction.Cascade);
                });

            migrationBuilder.CreateIndex(
                name: "ix_campaigns_id",
                schema: "drafts",
                table: "campaigns",
                column: "id");

            migrationBuilder.CreateIndex(
                name: "ix_campaigns_public_id",
                schema: "drafts",
                table: "campaigns",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_campaigns_slug",
                schema: "drafts",
                table: "campaigns",
                column: "slug",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_categories_public_id",
                schema: "drafts",
                table: "categories",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_commissioner_overrides_pick_id",
                schema: "drafts",
                table: "commissioner_overrides",
                column: "pick_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_draft_categories_category_id",
                schema: "drafts",
                table: "draft_categories",
                column: "category_id");

            migrationBuilder.CreateIndex(
                name: "ix_draft_hosts_host_id",
                schema: "drafts",
                table: "draft_hosts",
                column: "host_id");

            migrationBuilder.CreateIndex(
                name: "ux_draft_hosts_one_primary_per_draft_part",
                schema: "drafts",
                table: "draft_hosts",
                column: "draft_part_id",
                unique: true,
                filter: "role = 0");

            migrationBuilder.CreateIndex(
                name: "ux_draft_part_participants_unique",
                schema: "drafts",
                table: "draft_part_participants",
                columns: new[] { "draft_part_id", "participant_id_value", "participant_kind_value" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_draft_part_required_movie_versions_draft_part_id_movie_id",
                schema: "drafts",
                table: "draft_part_required_movie_versions",
                columns: new[] { "draft_part_id", "movie_id" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_draft_parts_draft_id_part_index",
                schema: "drafts",
                table: "draft_parts",
                columns: new[] { "draft_id", "part_index" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_draft_positions_game_board_id",
                schema: "drafts",
                table: "draft_positions",
                column: "game_board_id");

            migrationBuilder.CreateIndex(
                name: "ix_draft_releases_release_channel_release_date",
                schema: "drafts",
                table: "draft_releases",
                columns: new[] { "release_channel", "release_date" });

            migrationBuilder.CreateIndex(
                name: "ux_draft_releases_mainfeed_episode_number",
                schema: "drafts",
                table: "draft_releases",
                column: "episode_number",
                unique: true,
                filter: "release_channel = 0 AND episode_number is not null");

            migrationBuilder.CreateIndex(
                name: "ix_drafter_team_drafter_drafter_team_id",
                schema: "drafts",
                table: "drafter_team_drafter",
                column: "drafter_team_id");

            migrationBuilder.CreateIndex(
                name: "ix_drafters_person_id",
                schema: "drafts",
                table: "drafters",
                column: "person_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_drafters_public_id",
                schema: "drafts",
                table: "drafters",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_drafts_campaign_id",
                schema: "drafts",
                table: "drafts",
                column: "campaign_id");

            migrationBuilder.CreateIndex(
                name: "ix_drafts_public_id",
                schema: "drafts",
                table: "drafts",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_drafts_series_id",
                schema: "drafts",
                table: "drafts",
                column: "series_id");

            migrationBuilder.CreateIndex(
                name: "ix_game_boards_draft_part_id",
                schema: "drafts",
                table: "game_boards",
                column: "draft_part_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_hosts_person_id",
                schema: "drafts",
                table: "hosts",
                column: "person_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_hosts_public_id",
                schema: "drafts",
                table: "hosts",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_movie_versions_movie_id_name",
                schema: "drafts",
                table: "movie_versions",
                columns: new[] { "movie_id", "name" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_people_public_id",
                schema: "drafts",
                table: "people",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_picks_commissioner_override_id",
                schema: "drafts",
                table: "picks",
                column: "commissioner_override_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_picks_draft_part_id_play_order",
                schema: "drafts",
                table: "picks",
                columns: new[] { "draft_part_id", "play_order" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_picks_draft_part_id_position",
                schema: "drafts",
                table: "picks",
                columns: new[] { "draft_part_id", "position" });

            migrationBuilder.CreateIndex(
                name: "ix_picks_movie_id",
                schema: "drafts",
                table: "picks",
                column: "movie_id");

            migrationBuilder.CreateIndex(
                name: "ix_picks_played_by_participant_id_play_order",
                schema: "drafts",
                table: "picks",
                columns: new[] { "played_by_participant_id", "play_order" });

            migrationBuilder.CreateIndex(
                name: "ix_series_public_id",
                schema: "drafts",
                table: "series",
                column: "public_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_trivia_results_draft_part_id",
                schema: "drafts",
                table: "trivia_results",
                column: "draft_part_id");

            migrationBuilder.CreateIndex(
                name: "ix_veto_overrides_issued_by_participant_id",
                schema: "drafts",
                table: "veto_overrides",
                column: "issued_by_participant_id");

            migrationBuilder.CreateIndex(
                name: "ix_veto_overrides_veto_id",
                schema: "drafts",
                table: "veto_overrides",
                column: "veto_id",
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_veto_overrides_veto_id_issued_by_participant_id",
                schema: "drafts",
                table: "veto_overrides",
                columns: new[] { "veto_id", "issued_by_participant_id" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_vetoes_issued_by_participant_id_target_pick_id",
                schema: "drafts",
                table: "vetoes",
                columns: new[] { "issued_by_participant_id", "target_pick_id" },
                unique: true);

            migrationBuilder.CreateIndex(
                name: "ix_vetoes_target_pick_id",
                schema: "drafts",
                table: "vetoes",
                column: "target_pick_id",
                unique: true);

            migrationBuilder.AddForeignKey(
                name: "fk_commissioner_overrides_picks_pick_id",
                schema: "drafts",
                table: "commissioner_overrides",
                column: "pick_id",
                principalSchema: "drafts",
                principalTable: "picks",
                principalColumn: "id",
                onDelete: ReferentialAction.Cascade);
        }

        /// <inheritdoc />
        protected override void Down(MigrationBuilder migrationBuilder)
        {
            migrationBuilder.DropForeignKey(
                name: "fk_commissioner_overrides_picks_pick_id",
                schema: "drafts",
                table: "commissioner_overrides");

            migrationBuilder.DropTable(
                name: "draft_categories",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_hosts",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_part_required_movie_versions",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_positions",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_releases",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "drafter_team_drafter",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "inbox_message_consumers",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "inbox_messages",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "movie_versions",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "outbox_message_consumers",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "outbox_messages",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "trivia_results",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "veto_overrides",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "categories",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "hosts",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "game_boards",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "drafter_teams",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "drafters",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "vetoes",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "people",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "picks",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "commissioner_overrides",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_part_participants",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "movies",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "draft_parts",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "drafts",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "campaigns",
                schema: "drafts");

            migrationBuilder.DropTable(
                name: "series",
                schema: "drafts");
        }
    }
}
